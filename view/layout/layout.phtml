<?php 
/**
 * Cross Applicant Management
 * Layout template file
 * 
 * @copyright (c) 2013 Cross Solution (http://cross-solution.de)
 * @license   GPLv3
 */
?>

<?php echo $this->doctype(); ?>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <?php echo $this->headTitle($this->translate('Cross Applicant Management'))->setSeparator(' - ')->setAutoEscape(false) ?>

        <?php echo $this->headMeta()->appendName('viewport', 'width=device-width, initial-scale=1.0') ?>
        
        <?php echo $this->headScript()
                        ->prependFile($this->basepath('Core/js/core.init.js'))
                        ->prependFile($this->basePath('bootstrap/js/bootstrap.js'))
                        ->prependFile($this->basePath('js/jquery-1.9.1.js')) 
                        
                        ->appendScript('var lang="' . $this->params('lang') . '";');
        ?>
        
        <?php echo $this->headLink()->prependStylesheet($this->basePath() . '/Core/css/layout.css')
                                    ->prependStylesheet($this->basePath('bootstrap/css/bootstrap.css'));?>

        <?php echo $this->headStyle() ?>
    </head>
    <body>
        <div id="main">
            <header id="topbar" class="navbar navbar-fixed-top">
                <div class="navbar-inner">
                <div class="container">
                <a class="brand" href="<?php echo $this->basepath('/' . $this->params('lang'))?>"><?php echo $this->translate('Cross Applicant Management')?></a>
                

                <div class="nav-collapse collapse" id="main-navigation">
                    <?php 
                        echo $this->navigation('main_navigation')
                                  ->setAcl($this->services('acl'))
                                  ->setRole($this->auth('role'))
                                  ->menu()
                                  ->setMaxDepth(0)
                                  ->setUlClass('nav')//renderPartial(null, 'main-navigation')?>

                    <?php echo $this->loginInfo ?>
                </div> <!-- /main-navigation -->
                </div>
                </div>
                
            </header>
            
            <div id="container" class="container-fluid">
                <div class="row-fluid">
                    <div class="span2">
<!-- SIDEBAR -->
<div id="sidebar" class="affix">
<div class="btn-group" data-toggle="buttons-radio" id="language-switcher">
    <?php $lang = $this->params('lang');
    foreach (array('en', 'de') as $availableLang): ?>
    <button type="button" class="btn<?php echo $availableLang == $lang ? ' active' : ''?>" id="language-switcher-<?php echo $availableLang ?>">
    <?php echo strtoupper($availableLang) ?></button>
    <?php endforeach ?>
</div>
     
<div id="sub-nav">               
<?php
    echo $this->navigation()->menu()
              ->setOnlyActiveBranch()
              ->setMaxDepth(null)
              ->setMinDepth(1)
              ->setRenderParents(false)
              ->setUlClass('nav nav-tabs nav-stacked');
?>
</div>

<?foreach ($this->layout()->getChildren() as $child):
    if (0 === strpos($child->captureTo(), "sidebar_")):
        echo $this->{$child->captureTo()};
    endif;
endforeach;?>

</div>
<!-- /SIDEBAR -->
                    </div>
                    
                    <div id="content" class="span10">
<!-- CONTENT -->

<?php echo $this->content; ?>
<!-- /CONTENT -->
                    </div> <!-- /span10 -->
                </div> <!-- /row -->
            </div> <!-- /container -->

            <footer class="modal-footer navbar">
                <div class="container-fluid">
                <p class="pull-left"><small>&copy; 2013 <a href="http://cross-solution.de">Cross Solution</a>. <?php echo $this->translate('All rights reserved.') ?>
                    | <?php passthru('git describe') ?> [<?php passthru('git rev-parse --abbrev-ref HEAD') ?>]</small></p>
                
                <p class="pull-right"><small>
                    Powered by <a href="http://framework.zend.com">Zend Framework 2</a>,
                                <a href="http://getbootstrap.com/2.3.2/">Bootstrap</a>,
                                <a href="http://jquery.com">jQuery</a>
                               </small> </p>
                
                </div>
            </footer>
        </div> <!-- /main -->
    </body>
</html>
